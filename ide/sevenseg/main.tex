%\begin{abstract}
We show how to control
a seven segment display.
\subsection{Components}
%\begin{enumerate}[label=\thesubsection.\arabic*.,ref=\thesubsection.\theenumi]
\begin{enumerate}[label=\arabic*.,ref=\theenumi]
%\numberwithin{equation}{enumi}
%\numberwithin{figure}{enumi}
%\numberwithin{table}{section}
%\end{abstract}
\begin{table}[H]
%\resizebox {0.5\columnwidth} {!} {
	\centering
\input{ide/sevenseg/figs/components.tex}
%	}
\caption{Components}
\label{table:components}
\end{table}
%
\item Breadboard:
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\columnwidth]{ide/sevenseg/figs/breadboard}
\end{center}
\caption{Bread board connnections}
\label{fig:breadboard}
\end{figure}
%
The breadboard can be divided into 5 segments.  In each of the green segements, the pins are internally connected so as to have the same voltage.  Similarly, in the central segments, the pins in each column  are internally connected in the same fashion as the blue columns. 
\item Seven Segment Display:
\begin{figure}[!htb]
%\begin{figure}[H]
\begin{center}
\resizebox {0.5\columnwidth} {!} {
\input{ide/sevenseg/figs/sevenseg.tex}
}
\end{center}
\caption{Seven Segment pins}
\label{fig:sevenseg}
\end{figure}
%
The seven segment display in Fig. \ref{fig:sevenseg} has eight pins, $a, b, c, d, e, f, g$ and $dot$ that take an active LOW input, i.e.  the LED will glow only if the input is connected to ground.  Each of these pins is connected to an LED segment.  The $dot$ pin is  reserved for the $\cdot$ LED.  
%
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\columnwidth]{ide/sevenseg/figs/esp32.png}
\end{center}
\caption{ESP32-Devkit-v1}
\label{fig:esp32}
\end{figure}

\item ESP32-devkit-v1:
	The ESP32-devkit-v1 in Fig \ref{fig:esp32} has some ground pins, ADC\brak{Analog to Digital Converter} input pins D2, D4, D12-D15, D25-D27, D32 and D33 that can be used for both input as well as output. It also has two power pin that can generate 3.3$V$.  In the following exercises, only the GND, 3.3$V$ and digital pins will be used.
\end{enumerate}
%
\subsection{Display Control through Hardware }
\subsubsection{Powering the Display}
\begin{enumerate}[label=\arabic*.,ref=\theenumi]

\item
	Plug the display to the breadboard in Fig. \ref{fig:breadboard} and make the connections in Table \ref{table:ard_breadboard}.  Henceforth, all 3.3$V$ and GND connections will be made from the breadboard.

\begin{table}[H]
\centering
\input{ide/sevenseg/figs/ard_breadboard}
\caption{Supply for Bread board}
\label{table:ard_breadboard}
\end{table}

%\begin{center}
	%\includegraphics[width=0.75\columnwidth]{sevenseg}
%\end{center}

\item
Make the  connections in Table \ref{table:ard_disp}.  
%
\begin{table}[H]
\centering
\input{ide/sevenseg/figs/ard_disp}
\caption{Connecting Seven segment display on Bread board}
\label{table:ard_disp}
\end{table}
%
\item
	Connect the ESP32-devkit-v1 to the computer. The DOT led should glow.
\end{enumerate}
\subsubsection{Controlling the Display}
%
Fig. \ref{fig:sevenseg12} explains how to get decimal digits using the seven segment display. GND=0.  
\begin{figure}[H]
%\begin{figure}[!htb]
\begin{center}
\resizebox {0.8\columnwidth} {!} {
\input{ide/sevenseg/figs/sevenseg12.tex}
}
\end{center}
\caption{Seven Segment connections}
\label{fig:sevenseg12}
\end{figure}
\begin{enumerate}[label=\arabic*.,ref=\theenumi]
\item	Generate the number 1 on the display by connecting only the pins $b$ and $c$ to GND (=0). This corresponds to the  first row of \ref{table:arduioport}. 1 means not connecting to GND.
\item
	Repeat the above exercise to generate the number 2 on the display.
%
\item
Draw the numbers 0-9 as in Fig. \ref{fig:sevenseg12} and complete Table \ref{table:arduioport}
%	
\begin{table}[H]
\centering
\input{ide/sevenseg/figs/arduinoport.tex}
\caption{}
\label{table:arduioport}
\end{table}
%
%
\end{enumerate}
\subsection{Display Control through Software}
\begin{enumerate}[label=\arabic*.,ref=\theenumi]
\item
Make connections according to Table \ref{table:ard_disp_num}
%\iffalse
\begin{table}
\centering
\input{ide/sevenseg/figs/ard_disp_num}
\caption{}
\label{table:ard_disp_num}
\end{table}
%\fi

\item
Download the following code using the arduinodroid and execute
%
\begin{lstlisting}
cd ide/sevenseg/codes/sevenseg/sevenseg.cpp
pio run
\end{lstlisting}
%
\item
Now generate the numbers 0-9 by modifying the above program.

\end{enumerate}
